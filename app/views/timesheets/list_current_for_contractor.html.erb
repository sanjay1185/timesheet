<% title = params['timesheet_status'].nil? ? 'Outstanding' : params['timesheet_status'] %>

<div id="swap_from">
  <div id="screen_body" class="container">
    <div class="Left">
      <div class="col">
        <div class="page_header">
          <h1 class="index">Contractor dashboard</h1>
        </div>
        <div class="innercol">
                      <div id="blue-box" style="height:300px">
                        <div class="padder">
                          <table width="100%" cellspacing="0" cellpadding="2">
                            <tr>
                              <td class="header row_border_right">Start Date</td>
                              <td class="header row_border_right">Client</td>
                              <td class="header row_border_right">Contract</td>
                              <td class="header row_border_right">Day Total</td>
                              <td class="header row_border_right">Hourly Total</td>
                              <td class="header">Status</td>
                            </tr>

                            <% if @timesheets.length == 0 %>
                              <tr><td colspan="6">&nbsp;</td></tr>
                              <tr><td colspan="6" style="text-align: center;">There are no <%= title.downcase %> timesheets to display</td></tr>
                            <% else %>
                              <% for timesheet in @timesheets %>
                                <tr>
                                  <td class="row_border_bottom row_border_right">
                                    <% if timesheet.status == 'APPROVED' %>
                                      <%= link_to timesheet.startDate.to_formatted_s(:uk_date), edit_contractor_timesheet_path(@contractor, timesheet) %>
                                    <% else %>
                                      <%= link_to timesheet.startDate.to_formatted_s(:uk_date), edit_contractor_timesheet_path(@contractor, timesheet) %>
                                    <% end %>
                                  </td>
                                  <td class="row_border_bottom row_border_right"><%=h timesheet.contract.client.name %></td>
                                  <td class="row_border_bottom row_border_right"><%=h timesheet.contract.ref %></td>
                                  <td class="row_border_bottom row_border_right"><%=h timesheet.totalDays %></td>
                                  <td class="row_border_bottom row_border_right"><%=h timesheet.totalHours %></td>
                                  <td class="row_border_bottom"><%=h timesheet.status %></td>
                                </tr>
                              <% end %>
                              <tr><td colspan="6" align="center"><%= will_paginate(@timesheets) %></td></tr>
                            <% end %>
                          </table>
                          <br />
                        </div>
                      </div>

</div>
</div>
</div>
<div class="Right">

<%=render :partial=>"/new_contractor_dashboard_filter"%>

</div>
</div>

<div style="clear: both"></div>
</div>


<script type="text/javascript">

  var navbarbox = RUZEE.ShadedBorder.create({corner:2, border:1});
  navbarbox.render('nav-bar-box');
  var type_box = RUZEE.ShadedBorder.create({corner:2, border:1});
  type_box.render('timesheet-type-box');
  var bluebox = RUZEE.ShadedBorder.create({corner:2, border:1});
  bluebox.render('blue-box');

</script>