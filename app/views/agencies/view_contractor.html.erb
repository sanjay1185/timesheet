<% html_header = '' %>
<% html_header << "&nbsp;<a href=\"#{url_for(:controller => 'agencies', :action => 'contractors', :id => session[:agencyId])}\">Worker List</a> >> #{@contractor.user.full_name}" %>

<div id="nav-bar-box">
    <%= two_column_nav_bar_layout2(html_header, "") %>
  </div>
<div id="blue-box">
      <div class="padder">
        <table width="100%" cellpadding="0" cellspacing="0">
          <tr>
            <td class="left_side_cell">
              <div id="left-header-box" >
                <div class="header-container">Worker Details</div>
              </div>
              
               <br />
               <div class="with_margins">
               <table width="100%" align="center" cellpadding="0" cellspacing="0">
                    <tr>
                    	<td class="leftHeader">Name:</td>
                        <td><%=h @contractor.user.full_name %></td>
                    </tr>
                	<tr>
                    	<td class="leftHeader">Addr1:</td>
                        <td><%=h @contractor.user.addr1 %></td>
                    </tr>
                    <tr>
                    	<td class="leftHeader">Addr2:</td>
                        <td><%=h @contractor.user.addr2 %></td>
                    </tr>
                    <tr>
                    	<td class="leftHeader">Addr3:</td>
                        <td><%=h @contractor.user.addr3 %></td>
                    </tr>
                    <tr>
                    	<td class="leftHeader">City:</td>
                        <td><%=h @contractor.user.city %></td>
                    </tr>
                    <tr>
                    	<td class="leftHeader">Region:</td>
                        <td><%=h @contractor.user.region %></td>
                    </tr>
                    <tr>
                    	<td class="leftHeader">Email:</td>
                        <td><a href="mailto:<%= @contractor.user.email %>"><%= @contractor.user.email %></a></td>
                    </tr>
                    <tr>
                    	<td class="leftHeader">Phone:</td>
                        <td><%=h @contractor.user.phone %></td>
                    </tr>
                    <tr>
                    	<td class="leftHeader">Mobile:</td>
                        <td><%=h @contractor.user.mobile %></td>
                    </tr>
                </table>
            </div>
                <br />
            </td> <!-- cell -->
            <td class="right_side_cell" valign="top">
              <div id="right-header-box">
                <div class="header-container">Contract History</div>
              </div>
              <br />
              <div class="with_margins">
              <table width="100%" align="center" cellpadding="0" cellspacing="0">

                    <tr>
                    	<td class="header row_border_right">End Date</td>
                        <td class="header row_border_right">Client</td>
                        <td class="header">Status</td>
                    </tr>
                    <% if !@contracts.nil? %>
                    <% for contract in @contracts %>
                   
                    <tr>
                    	<td class="row_border_bottom row_border_right"><%=h contract.endDate.to_formatted_s(:uk_date) %></td>
                        <td class="row_border_bottom row_border_right"><% if contract.client.name.length > 23 %><%=h contract.client.name[0..21] + "..." %><% else %><%=h contract.client.name %><% end %></td>
                        <td class="row_border_bottom"><%=h contract.status %></td>
                    </tr>

                    <% end %>
                   <% end %>
                </table>
              </div>
            </td> <!-- cell -->
          </tr> <!-- row -->
        </table> <!-- table -->
      </div>
    </div>
<script type="text/javascript">
  
    var navbarbox = RUZEE.ShadedBorder.create({corner:8, border:1});
    navbarbox.render('nav-bar-box');
    var bluebox = RUZEE.ShadedBorder.create({corner:8, border:1});
    bluebox.render('blue-box');
    var leftheaderbox = RUZEE.ShadedBorder.create({corner:8, border:1});
    leftheaderbox.render('left-header-box');
    var rightheaderbox = RUZEE.ShadedBorder.create({corner:8, border:1});
    rightheaderbox.render('right-header-box');
    
</script>