<% form_tag(approve_deny_timesheets_path) do %>
  <%= show_errors('Timesheet List', flash[:alert]) %>
  <div id="nav-bar-box">
    <%= two_column_nav_bar_layout2('Timesheets Requiring Approval', "#{submit_tag('Approve', :id => 'approve', :class => 'generalButton')}&nbsp;#{submit_tag('&nbsp;&nbsp;&nbsp;Deny&nbsp;&nbsp;&nbsp;', :id => 'deny', :class => 'generalButton')}") %>
  </div>
  <div id="blue-box" style="height:300px">
    <div class="padder">
      
      <table cellpadding="2" cellspacing="0" width="100%">

        <tr>
          <td class="header">&nbsp;</td>
          <td class="header row_border_right">Start Date</td>
          <td class="header row_border_right">End Date</td>
          <td class="header row_border_right">Temp</td>
          <td class="header row_border_right">Contract Ref</td>
          <td class="header row_border_right">Total Hours</td>
          <td class="header row_border_right">Submitted On</td>
          <td class="header">Status</td>
        </tr>


        <% if @timesheets.length == 0 %>
          <tr><td colspan="8">&nbsp;</td></tr>
          <tr>
            <td colspan="8" align="center">There are no timesheets awaiting your approval</td>
          </tr>
        <% else %>

          <% for timesheet in @timesheets %>
            <tr>
              <td class="row_border_bottom"><%= check_box_tag "ids[]", timesheet.id %></td>
              <td class="row_border_bottom row_border_right"><a href="<%= url_for :controller => 'approverdashboard', :action => 'view_timesheet', :timesheet_id => timesheet.id %>"><%= timesheet.startDate.to_formatted_s(:uk_date) %></a></td>
              <td class="row_border_bottom row_border_right"><%=h (timesheet.startDate+7).to_formatted_s(:uk_date) %></td>
              <td class="row_border_bottom row_border_right"><%=h timesheet.contractor.user.full_name %></td>
              <td class="row_border_bottom row_border_right"><%=h timesheet.contract.ref %></td>
              <td class="row_border_bottom row_border_right"><%=h timesheet.totalHours %></td>
              <td class="row_border_bottom row_border_right"><%=h timesheet.updated_at.to_formatted_s(:date_time24) %></td>
              <td class="row_border_bottom"><%=h timesheet.status %></td>
            </tr>
          <% end %>
          <tr><td colspan="8" align="center" ><%= will_paginate(@timesheets) %></td></tr>
        <% end %>

      </table>
    </div>
  </div>
  <script type="text/javascript">

    var navbarbox = RUZEE.ShadedBorder.create({corner:8, border:1});
    navbarbox.render('nav-bar-box');
    var bluebox = RUZEE.ShadedBorder.create({corner:8, border:1});
    bluebox.render('blue-box');

  </script>
<% end %>